<!DOCTYPE html>
<html lang="en-us" class="no-js">
  <head>
    <meta charset="utf-8">
    <title>
      Vanilla Modal Dialogs
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <script>
      // remove no-js and add 'js' to the HTML
      document.documentElement.className = document.documentElement.className.replace('no-js', 'js');
    </script>
    <style>
      *,*:after,*:before{box-sizing:border-box;font-family:arial;}
      *{margin-top: 0;}
      header,main {display: block; /* IE */}
      *:focus{outline: 2px solid #921c2b; outline-offset: 2px; text-decoration: none;}
      body,html{background:#fafafa;color:#450c13;font-size:20px;line-height:1.3;margin:0;padding:0;}
      .content-area{padding:20px;margin:auto; max-width:680px;}
      a{color:#921c2b}
      .btn, [role="button"]{background:#921c2b;border:1px solid #4d0912;color:#fff;cursor:default;display:inline-block;font-size:.825em;line-height:1;margin-bottom:12px;padding:16px 24px;position:relative;text-align:center;transition:transform .2s, background .2s; text-decoration: none}
      .btn:hover,.btn:focus, [role="button"]:hover, [role="button"]:focus{background:#c12f48;}
      label{display:inline-block;font-size:.75em;font-weight:bold;margin-bottom:.5em}
      input[type="text"]{border:1px solid #333;display:block;font-size:1.4em;margin-bottom:1em;min-width:230px;padding:.5em;width:100%}
      label{margin-top:1.125em}
      button{border:none;}
      .at-only:not(:focus):not(:active) {
        clip: rect(0 0 0 0);
        clip-path: inset(100%);
        height: 1px;
        overflow: hidden;
        position: absolute;
        white-space: nowrap;
        width: 1px;
      }
      a.at-only:focus {
        background: white;
        padding: 8px;
        position: fixed;
      }
      fieldset {
        margin: 1.25em 0;
      }
      legend {
        margin: 0;
        padding: 0;
      }
      legend h2 {
        margin: 0;
        font-size: 1em;
      }
      /* was causing a weird page jump. just hide it */
      body > .at-only[inert] {
        display: none;
      }
      details {
        margin: 1.25em 0;
      }
      summary {
        cursor: default;
        margin-bottom: .825em;
      }
      details p,
      details div {
        font-size: .825em;
      }
      details code {
        font-family: monospace;
        display: inline-block;
        padding: 2px 4px;
        color: #000;
        background: #efefef;
        line-height: 1;
        border: 1px solid #ddd;
      }
      main > section {
        margin-top: 2em;
        padding-top: 1.5em;
        border-top: 1px solid;
      }
      h3 span {
        font-size: .75em;
        display: inline-block;
        width: 100%;
      }

      .callout-test {
        margin-left: -1.25em;
        width: calc(100% + 2.5em);
        padding: 1.25em;
        background: #eee;
      }

      .callout-test > *:last-child {
        margin-bottom: 0;
      }
    </style>
    <link rel="stylesheet" href="assets/css/aria.modal.css">
  </head>
  <body>
    <a href="#main" class="at-only">
      Skip to main content
    </a>

    <header class="content-area">
      <h1>
        Accessible Modal Dialogs
        with <span>Vanilla <abbr title="JavaScript">JS</abbr></span>
      </h1>
    </header>

    <main id="main" class="content-area" aria-label="content">

      <h2>
        Dialog Demos
      </h2>

      <p>
        Each of the following tests show off different features of the modal dialog script. For a listing of all the dialog configuration options, see the
        <a href="#">readme on the GitHub repo</a>.
      </p>

      <section>
        <h3>
          Modal Test 1
          <span>A single modal dialog launched from different triggers</span>
        </h3>

        <p>
          <a href="#modal_1" class="btn" data-modal-open>
            Launch Modal (link)
          </a>
          <span class="btn" data-modal-open="modal_1">
            Launch Modal (span)
          </span>
          <button type="button" class="btn" data-modal-open="modal_1">
            Launch Modal (button)
          </button>
        </p>

        <div id="modal_1"
          data-modal
          data-modal-class="test"
          data-modal-compact>
          <h2>
            Announcement
          </h2>

          <div>
            <p>Content goes here</p>
          </div>
        </div>

        <details>
          <summary>
            Modal Test 1 details
          </summary>
          <p>
            Each of the trigger elements are progressively enhanced (as needed)
            into buttons. They all open the same modal dialog. They each
            are assigned their own unique ID that will be used to refocus the
            correct element upon closing of the dialog.
          </p>
          <p>
            The dialog utilizes <code>data-modal-label</code> to set its
            accessible name; <code>data-modal-class</code> to apply a specific class
            to itself, when JavaScript is available; <code>data-modal-compact</code>
            to keep the dialog from going full screen on small screen devices,
            and <code>data-modal-close</code> to auto-generate a close icon button.
          </p>
        </details>
      </section>


      <section>
        <h3>
          Modal Test 2
          <span>A modal dialog with an autofocused, autogenerated, close button</span>
        </h3>

        <p>
          <button type="button" class="btn"
            data-modal-open="modal_2">
            Launch Modal 2
          </button>
        </p>

        <div id="modal_2"
          data-modal
          data-modal-compact
          data-modal-close="Close Me!"
          data-modal-close-class="btn"
          data-modal-focus-close>

          <h2>
            Topic Title
          </h2>

          <div>
            <p data-modal-description>
              Content goes here, to talk about this topic. It's very
              important, because why else would a modal dialog be used?
            </p>
          </div>
        </div>

        <details>
          <summary>
            Modal Test 2 details
          </summary>
          <p>
            Here the modal dialog has a generated close button, which is auto focused when the dialog is opened. The text of the close button and a class are passed to the generated close button via the <code>data-modal-close</code> and <code>data-modal-close-class</code> attributes respectively.
          </p>
          <p>
            A <code>data-modal-description</code> is added to the primary descriptor child element (in this case a <code>p</code> element) of the dialog so that when the close button is focused, the accessible name of the dialog, its description, and the close button are all announced by screen readers.
          </p>
        </details>
      </section>


      <section>
        <h3>
          Modal Test 3
          <span>A dialog containing an autofocused input</span>
        </h3>

        <p>
          <button type="button"
            class="btn"
            data-modal-open="modal_3"
            hidden>
            Launch Modal 3
          </button>
        </p>

        <div id="modal_3" hidden data-modal>
          <h2>
           Another Announcement
          </h2>

          <div class="callout-test" data-modal-description>
            <p>
              Please provide us your name.
            </p>
            <p>
              Maybe so we can personalize your experience?
            </p>
          </div>

          <label for="c_name">
            <span style="display: block;">
              Name:
            </span>
            <input type="text" id="c_name" data-autofocus>
          </label>

          <div>
            <button type="button" class="btn" data-modal-close-btn>
              Cancel
            </button>
            <button type="submit"
              class="btn"
              data-modal-close-btn
              onClick="event.preventDefault();">
              Submit
            </button>
          </div>

        </div>

        <details>
          <summary>
            Modal Test 3 details
          </summary>
          <p>
            ...
          </p>
        </details>
      </section>


      <section>
        <h3>
          Modal Test 4
          <span>
            something
          </span>
        </h3>

        <p>
          <a class="btn" data-modal-open="modal_4">
            Launch Modal 4
          </a>
        </p>

        <div id="modal_4"
          hidden
          data-modal
          aria-describedby="desc">
          <h1>
            Make a selection
          </h1>

          <p id="desc">
            Select the option you would like.
          </p>

          <form>
            <fieldset>
              <legend>
                <h2>
                  You have options
                </h2>
              </legend>

              <div>
                <label for="opt_1">
                  <input type="radio" id="opt_1" name="text_radios">
                  Option 1
                </label>
              </div>

              <div>
                <label for="opt_2">
                  <input type="radio" id="opt_2" name="text_radios">
                  Option 2
                </label>
              </div>
            </fieldset>

            <div>
              <button type="submit"
                class="btn"
                data-modal-close-btn
                onClick="event.preventDefault();">
                Confirm
              </button>
            </div>

          </form>
        </div>

        <details>
          <summary>
            Modal Test 4 details
          </summary>
          <p>
            ...
          </p>
        </details>
      </section>


      <section>
        <h3>
          Modal Test 5
          <span>
            An alert modal dialog
          </span>
        </h3>

        <p>
          <a class="btn" data-modal-open="modal_5">
            Launch Alert Modal
          </a>
        </p>

        <div id="modal_5"
          hidden
          data-modal="alert">
          <h1>
           An important message
          </h1>

          <div>
            <p data-modal-description>
              This is a short description of this alert.
            </p>

            <button type="button" class="btn" data-modal-close-btn>
              Cancel
            </button>
            <button type="button"
              class="btn"
              data-autofocus
              data-modal-close-btn>
              OK
            </button>
          </div>
        </div>

        <details>
          <summary>
            Modal Test 5 details
          </summary>
          <p>
            An alert dialog should be used when a response is required from a user. Where standard dialogs may allow for multiple passive ways to exit them, such as mouse clicking outside the dialog, or using a close button that provides no concrete commitment from a user that they actually engaged with the dialog's contents; an alert dialog should only be closed via purposeful button activations by a user.
          </p>
          <p>
            For instance, an alert dialog may have a single "OK" button to indicate that the user is compliant with the message the dialog presents to them. Or a specific choice of "deny" or "confirm" buttons, to indicate that a user agrees or disagrees with the dialog's primary message.
          </p>
          <p>
            With this in mind, it should be noted that an alert dialog will not auto generate close buttons. Authors should enter the specific actionable elements to dismiss the dialog. Alert dialogs also do not allow for a mouse click outside of the dialog to close them.
          </p>
          <p>
            If an alert dialog contains a short message and a single actionable item, then that item may be autofocused, and the dialog may utilize <code>aria-describedby</code> to read out the contents of the dialog to the user, to decrease a user having to navigate the dialog themselves.  If an alert dialog contains more than a confirmation button to dismiss it, e.g. there is a confirm, deny, or other choices to dismiss the dialog, then autofocusing a choice may lead some users to believe that is their only choice.
          </p>
        </details>
      </section>
    </main>

    <script src="assets/js/aria.modal.js"></script>
    <script>
      window.addEventListener( "hashchange", function( e ) {
          var el = document.getElementById( location.hash.substring( 1 ) );
          if ( el ) {
            if ( !/^(?:a|select|input|button|textarea)$/i.test( el.tagName ) ) {
              el.tabIndex = -1;
            }
            el.focus();
          }
        }, false );
    </script>
    <script src="https://cdn.rawgit.com/GoogleChrome/inert-polyfill/v0.1.0/inert-polyfill.min.js"></script>
  </body>
</html>
